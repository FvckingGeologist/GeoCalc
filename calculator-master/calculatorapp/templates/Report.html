{% extends "layout.html" %}

{% block title %}
    <title>Report</title>
{% endblock %}

{% block li1 %}  {% endblock %}
{% block li2 %}  {% endblock %}
{% block li3 %} class="active" {% endblock %}
{% block li4 %}  {% endblock %}
{% block li5 %}  {% endblock %}
{% block li6 %}  {% endblock %}

{% block content %}

<center><h1>ОТЧЕТ</h1>
<br>
<h2>результаты расчета по вашему набору данных: Вероятность успешной реализации {{ N1 }}%</h2>

<br>

 <h3>Вероятность коммерчески успешной реализации проекта</h3></center>
<div class="chartCont" style="position: relative; height:300px; width:350px">
<canvas id="myRound1" width="200" height="250"></canvas>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>

new Chart(document.getElementById("myRound1"), {
    type: 'pie',
    data: {
      labels: ["Вероятность успеха", "Вероятность неуспеха"],
      datasets: [{
        label: "Вероятность, %",
        backgroundColor: ["#E74C3C", "#F2F4F4"],
        data: [ {{ N1  }}, 100-{{ N1  }} ]
      }]
    },
    options: {
      title: {
        display: true,
        text: 'Вероятность ком. реализации проекта'
      }
    }
});
  </script>
</div>
<br>

<center><h3>Основные экономические показатели</h3></center>
<center><table id="mytable">
  <tr>
    <th>Наименование</th>
    <th>Размерность</th>
    <th>Значение</th>
  </tr>
  <tr>
    <td>Общественная эффективность</td>
    <td>млн.руб.</td>
    <td>{{ N2 }}</td>
  </tr>
  <tr>
    <td>NPV</td>
    <td>млн.руб.</td>
    <td>{{ N3 }}</td>
  </tr>
  <tr>
    <td>PI</td>
    <td>д.ед.</td>
    <td>{{ N4 }}</td>
  </tr>
  <tr>
    <td>IRR</td>
    <td>%</td>
    <td>{{ N5 }}</td>
  </tr>
  <tr>
    <td>Бюджетная эффективность</td>
    <td>млн.руб.</td>
    <td>{{ N6 }}</td>
  </tr>
</table></center>

<br><br>
<center><h2>РАЗДЕЛ 1 - РАСЧЕТ ПО БАЗОВОМУ ВАРИАНТУ</h2></center>
<br>
<p>В данном разделе проверяется работа расчетной модели по заданному базовому (рекомендуется - по среднему) варианту. Следует проверить правильность расчета физических объемов ГРР, горных работ, текущих и капитальных затрат суммарно и в динамике. Эта-же модель будет использована для стохастического моделирования</p>
<br>
<center><h3>{{ N8 }}</h3></center>
<div class="chartCont" style="position: relative; height:300px; width:350px">
<canvas id="myRound4" width="200" height="250"></canvas>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
new Chart(document.getElementById("myRound4"), {
    type: 'pie',
    data: {
      labels: ['{{ N9 }}', '{{ N10 }}', '{{ N11 }}', '{{ N12 }}', '{{ N13 }}'],
      datasets: [{
        label: '{{ N14 }}',
        backgroundColor: ["#C0392B", "#9B59B6", "#2980B9", "#1ABC9C", "#ECF0F1"],
        data: [{{ N15 }}, {{ N16 }}, {{ N17 }}, {{ N18 }}, {{ N19 }}]
      }]
    },
    options: {
      title: {
        display: true,
        text: '{{ N8 }}'
      }
    }
});
  </script>
</div>
<br><br>

<center><h3>'{{ N20 }}'</h3></center>
<div class="chartCont" style="position: relative; height:300px; width:350px">
<canvas id="myRound2" width="200" height="250"></canvas>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
new Chart(document.getElementById("myRound2"), {
    type: 'pie',
    data: {
      labels: ['{{ N21 }}', '{{ N22 }}', '{{ N23 }}', '{{ N24 }}', '{{ N25 }}'],
      datasets: [{
        label: '{{ N26 }}',
        backgroundColor: ["#C0392B", "#9B59B6", "#2980B9", "#1ABC9C", "#ECF0F1"],
        data: [{{ N27 }}, {{ N28 }}, {{ N29 }}, {{ N30 }}, {{ N31 }}]
      }]
    },
    options: {
      title: {
        display: true,
        text: '{{ N20 }}'
      }
    }
});
  </script>
</div>
<br><br>
<center><h3>{{ N32 }}</h3></center>
<div class="chartCont" style="position: relative; height:300px; width:350px">
<canvas id="myRound3" width="200" height="250"></canvas>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
new Chart(document.getElementById("myRound3"), {
    type: 'pie',
    data: {
      labels: ['{{ N33 }}', '{{ N34 }}', '{{ N35 }}', '{{ N36 }}', '{{ N37 }}'],
      datasets: [{
        label: '{{ N38 }}',
        backgroundColor: ["#C0392B", "#9B59B6", "#2980B9", "#1ABC9C", "#ECF0F1"],
        data: [{{ N39 }}, {{ N40 }}, {{ N41 }}, {{ N42 }}, {{ N43 }}]
      }]
    },
    options: {
      title: {
        display: true,
        text: '{{ N32 }}'
      }
    }
});
  </script>
</div>
<br><br>
<!-- <center><h3>{{ N44 }}</h3></center> -->
<div class="chartCont" style="position: relative; height:600px; width:800px">
<center><canvas id="myChart" width="800" height="600"></canvas></center>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>

  const ctx = document.getElementById('myChart').getContext('2d');
  const myChart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels : [1,	2,	3,	4,	5,	6,	7,	8,	9,	10,	11,	12,	13,	14,	15,	16,	17,	18,	19,	20,	21,	22,	23,	24,	25],
          datasets: [{
            label: "{{ N45 }}",
            data :{{ N52 }},
            backgroundColor: '#EB984E',
            borderColor: '#D35400',
            borderWidth: 1,
            stack: 'Stack 0'
          },{
            label: "{{ N46 }}",
            data : {{ N53 }},
            backgroundColor: '#85C1E9',
            borderColor: '#2E86C1',
            borderWidth: 1,
            stack: 'Stack 0'
          },{
            label: "{{ N47 }}",
            data : {{ N54 }},
            backgroundColor: "#9B59B6",
            borderColor: '#2E86C1',
            borderWidth: 1,
            stack: 'Stack 0'
          }]
      },


            options: {
                plugins: { title: { display: true, text: '{{ N44 }}', color: 'black', font: {weight: 'bold', size: 18} } },
                scales: {
                    x: { title: { display: true, text: '{{ N50 }}'},stacked: true  },
                    y: { title: { display: true, text: '{{ N51 }}'},stacked: true  }
                }
            }

  });
  </script>
</div>
<br><br>
<center><h3>'{{ N57 }}'</h3></center>
<center><table id="mytable">
  <tr>
    <th>Наименование</th>
    <th>Размерность</th>
    <th>Значение</th>
  </tr>
  <tr>
    <td>{{ N58 }}</td>
    <td>{{ N68 }}</td>
    <td>{{ N78 }}</td>
  </tr>
  <tr>
    <td>{{ N59 }}</td>
    <td>{{ N69 }}</td>
    <td>{{ N79 }}</td>
  </tr>
  <tr>
    <td>{{ N60 }}</td>
    <td>{{ N70 }}</td>
    <td>{{ N80 }}</td>
  </tr>
  <tr>
    <td>{{ N61 }}</td>
    <td>{{ N71 }}</td>
    <td>{{ N81 }}</td>
  </tr>
  <tr>
    <td>{{ N62 }}</td>
    <td>{{ N72 }}</td>
    <td>{{ N82 }}</td>
  </tr>
  <tr>
    <td>{{ N63 }}</td>
    <td>{{ N73 }}</td>
    <td>{{ N83 }}</td>
  </tr>
  <tr>
    <td>{{ N64 }}</td>
    <td>{{ N74 }}</td>
    <td>{{ N84 }}</td>
  </tr>
  <tr>
    <td>{{ N65 }}</td>
    <td>{{ N75 }}</td>
    <td>{{ N85 }}</td>
  </tr>
  <tr>
    <td>{{ N66 }}</td>
    <td>{{ N76 }}</td>
    <td>{{ N86 }}</td>
  </tr>
  <tr>
    <td>{{ N67 }}</td>
    <td>{{ N77 }}</td>
    <td>{{ N87 }}</td>
  </tr>
</table></center>
<br><br>

<div class="chartCont" style="position: relative; height:600px; width:800px">
<center><canvas id="myChart1" width="800" height="600"></canvas></center>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>

  const ctx1 = document.getElementById('myChart1').getContext('2d');
  const myChart1 = new Chart(ctx1, {
      type: 'bar',
      grouped: true,
      data: {
        labels : [1,	2,	3,	4,	5,	6,	7,	8,	9,	10,	11,	12,	13,	14,	15,	16,	17,	18,	19,	20,	21,	22,	23,	24,	25],
          datasets: [{
            label: "{{ N89 }}",
            data : {{ N101 }},
            backgroundColor: "#C0392B",
            borderColor: '#17202A',
            borderWidth: 1,
            stack: 'Stack 0'
          },{
            label: "{{ N90 }}",
            data : {{ N102 }},
            backgroundColor: "#9B59B6",
            borderColor: '#17202A',
            borderWidth: 1,
            stack: 'Stack 0'
          },{
            label: "{{ N91 }}",
            data : {{ N103 }},
            backgroundColor: "#2980B9",
            borderColor: '#17202A',
            borderWidth: 1,
            stack: 'Stack 0'
          },{
            label: "{{ N92 }}",
            data : {{ N104 }},
            backgroundColor: "#1ABC9C",
            borderColor: '#17202A',
            borderWidth: 1,
            stack: 'Stack 0'
          },{
            label: "{{ N93 }}",
            data : {{ N105 }},
            backgroundColor: "#ECF0F1",
            borderColor: '#17202A',
            borderWidth: 1,
            stack: 'Stack 0'
          },{
            label: "{{ N94 }}",
            data : {{ N106 }},
            backgroundColor: "#E74C3C",
            borderColor: '#17202A',
            borderWidth: 1,
            stack: 'Stack 0'
          },{
            label: "{{ N95 }}",
            data : {{ N107 }},
            backgroundColor: "#8E44AD",
            borderColor: '#17202A',
            borderWidth: 1,
            stack: 'Stack 0'
          },{
            label: "{{ N96 }}",
            data : {{ N108 }},
            backgroundColor: "#3498DB",
            borderColor: '#17202A',
            borderWidth: 1,
            stack: 'Stack 0'
          },{
            label: "{{ N97 }}",
            type: "line",
            data : {{ N109 }},
            backgroundColor: "#16A085",
            borderColor: '#17202A',
            borderWidth: 1,
            stack: 'Stack 1'
          }]
      },


            options: {
                plugins: { title: { display: true, text: '{{ N88 }}', color: 'black', font: {weight: 'bold', size: 18} } },
                scales: {
                    x: { title: { display: true, text: '{{ N99 }}'},stacked: true },
                    y: { title: { display: true, text: '{{ N100 }}'},stacked: true }
                }
            }
  });
  </script>
</div>
<br><br>

<center><table id="mytable">
  <tr>
    <th>Наименование</th>
    <th>Размерность</th>
    <th>Значение</th>
  </tr>
  <tr>
    <td>{{ N112 }}</td>
    <td>{{ N122 }}</td>
    <td>{{ N132 }}</td>
  </tr>
  <tr>
    <td>{{ N113 }}</td>
    <td>{{ N123 }}</td>
    <td>{{ N133 }}</td>
  </tr>
  <tr>
    <td>{{ N114 }}</td>
    <td>{{ N124 }}</td>
    <td>{{ N134 }}</td>
  </tr>
  <tr>
    <td>{{ N115 }}</td>
    <td>{{ N125 }}</td>
    <td>{{ N135 }}</td>
  </tr>
  <tr>
    <td>{{ N116 }}</td>
    <td>{{ N126 }}</td>
    <td>{{ N136 }}</td>
  </tr>
  <tr>
    <td>{{ N117 }}</td>
    <td>{{ N127 }}</td>
    <td>{{ N137 }}</td>
  </tr>
  <tr>
    <td>{{ N118 }}</td>
    <td>{{ N128 }}</td>
    <td>{{ N138 }}</td>
  </tr>
  <tr>
    <td>{{ N119 }}</td>
    <td>{{ N129 }}</td>
    <td>{{ N139 }}</td>
  </tr>
  <tr>
    <td>{{ N120 }}</td>
    <td>{{ N130 }}</td>
    <td>{{ N140 }}</td>
  </tr>
  <tr>
    <td>{{ N121 }}</td>
    <td>{{ N131 }}</td>
    <td>{{ N141 }}</td>
  </tr>
</table></center>
<br><br>

<center><h3>{{ N142 }}</h3></center>
<div class="chartCont" style="position: relative; height:650px; width:600px">
<canvas id="myRound5" width="600" height="650"></canvas>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
new Chart(document.getElementById("myRound5"), {
    type: 'pie',
    data: {
      labels: ['{{ N143 }}', '{{ N144 }}', '{{ N145 }}', '{{ N146 }}', '{{ N147 }}', '{{ N148 }}', '{{ N149 }}', '{{ N150 }}', '{{ N151 }}', '{{ N152 }}', '{{ N153 }}', '{{ N154 }}', '{{ N155 }}'],
      datasets: [{
        label: '{{ N156 }}',
        backgroundColor: ["#C0392B", "#9B59B6", "#2980B9", "#1ABC9C", "#ECF0F1", "#E74C3C", "#8E44AD", "#3498DB", "#16A085", "#2ECC71", "#F1C40F", "#E67E22", "#2C3E50"],
        data: [{{ N157 }}, {{ N158 }}, {{ N159 }}, {{ N160 }}, {{ N161 }}, {{ N162 }}, {{ N163 }}, {{ N164 }}, {{ N165 }}, {{ N166 }}, {{ N167 }}, {{ N168 }}, {{ N169 }}]
      }]
    },
    options: {
      title: {
        display: true,
        text: '{{ N142 }}'
      }
    }
});
  </script>
</div>
<br><br>

<center><h3>{{ N170 }}</h3></center>
<div class="chartCont" style="position: relative; height:650px; width:600px">
<canvas id="myRound6" width="600" height="650"></canvas>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
new Chart(document.getElementById("myRound6"), {
    type: 'pie',
    data: {
        labels: ['{{ N171 }}', '{{ N172 }}', '{{ N173 }}', '{{ N174 }}', '{{ N175 }}', '{{ N176 }}', '{{ N177 }}', '{{ N178 }}', '{{ N179 }}', '{{ N180 }}'],

        datasets: [{
        label: '{{ N181 }}',
        backgroundColor: ["#C0392B", "#9B59B6", "#2980B9", "#1ABC9C", "#ECF0F1", "#E74C3C", "#8E44AD", "#3498DB", "#16A085", "#2ECC71"],
        data: [{{ N182 }}, {{ N183 }}, {{ N184 }}, {{ N185 }}, {{ N186 }}, {{ N187 }}, {{ N188 }}, {{ N189 }}, {{ N190 }}, {{ N191 }}]
      }]
    },
    options: {
      title: {
        display: true,
        text: '{{ N170 }}'
      }
    }
});
  </script>
</div>
<br><br>
<center><h3>{{ N192 }}</h3></center>
<center><table id="mytable">
  <tr>
    <th>Наименование</th>
    <th>Размерность</th>
    <th>Значение</th>
  </tr>
  <tr>
    <td>{{ N193 }}</td>
    <td>{{ N206 }}</td>
    <td>{{ N219 }}</td>
  </tr>
  <tr>
    <td>{{ N194 }}</td>
    <td>{{ N207 }}</td>
    <td>{{ N220 }}</td>
  </tr>
  <tr>
    <td>{{ N195 }}</td>
    <td>{{ N208 }}</td>
    <td>{{ N221 }}</td>
  </tr>
  <tr>
    <td>{{ N196 }}</td>
    <td>{{ N209 }}</td>
    <td>{{ N222 }}</td>
  </tr>
  <tr>
    <td>{{ N197 }}</td>
    <td>{{ N210 }}</td>
    <td>{{ N223 }}</td>
  </tr>
  <tr>
    <td>{{ N198 }}</td>
    <td>{{ N211 }}</td>
    <td>{{ N224 }}</td>
  </tr>
  <tr>
    <td>{{ N199 }}</td>
    <td>{{ N212 }}</td>
    <td>{{ N225 }}</td>
  </tr>
  <tr>
    <td>{{ N200 }}</td>
    <td>{{ N213 }}</td>
    <td>{{ N226 }}</td>
  </tr>
  <tr>
    <td>{{ N201 }}</td>
    <td>{{ N214 }}</td>
    <td>{{ N227 }}</td>
  </tr>
  <tr>
    <td>{{ N202 }}</td>
    <td>{{ N215 }}</td>
    <td>{{ N228 }}</td>
  </tr>
      <tr>
    <td>{{ N203 }}</td>
    <td>{{ N216 }}</td>
    <td>{{ N229 }}</td>
  </tr>
  <tr>
    <td>{{ N204 }}</td>
    <td>{{ N217 }}</td>
    <td>{{ N230 }}</td>
  </tr>
  <tr>
    <td>{{ N205 }}</td>
    <td>{{ N218 }}</td>
    <td>{{ N231 }}</td>
  </tr>
</table></center>
<br><br>
<center><h3>{{ N232 }}</h3></center>
<center><table id="mytable">
    <tr>
    <th>Наименование</th>
    <th>Размерность</th>
    <th>Значение</th>
  </tr>
  <tr>
    <td>{{ N233 }}</td>
    <td>{{ N243 }}</td>
    <td>{{ N253 }}</td>
  </tr>
  <tr>
    <td>{{ N234 }}</td>
    <td>{{ N244 }}</td>
    <td>{{ N254 }}</td>
  </tr>
  <tr>
    <td>{{ N235 }}</td>
    <td>{{ N245 }}</td>
    <td>{{ N255 }}</td>
  </tr>
  <tr>
    <td>{{ N236 }}</td>
    <td>{{ N246 }}</td>
    <td>{{ N256 }}</td>
  </tr>
  <tr>
    <td>{{ N237 }}</td>
    <td>{{ N247 }}</td>
    <td>{{ N257 }}</td>
  </tr>
  <tr>
    <td>{{ N238 }}</td>
    <td>{{ N248 }}</td>
    <td>{{ N258 }}</td>
  </tr>
  <tr>
    <td>{{ N239 }}</td>
    <td>{{ N249 }}</td>
    <td>{{ N259 }}</td>
  </tr>
  <tr>
    <td>{{ N240 }}</td>
    <td>{{ N250 }}</td>
    <td>{{ N260 }}</td>
  </tr>
  <tr>
    <td>{{ N241 }}</td>
    <td>{{ N251 }}</td>
    <td>{{ N261 }}</td>
  </tr>
  <tr>
    <td>{{ N242 }}</td>
    <td>{{ N252 }}</td>
    <td>{{ N262 }}</td>
  </tr>
</table></center>
<br><br>
<center><h2>Раздел 2 - Стохастический расчет вероятности успешной реализации проекта</h2></center>
<br>
<p>В данном разделе производится расчет вероятности успешной реализации проекта, равной количеству расчетных вариантов с NPV>0 к общему количеству расчетов. Каждый расчетный вариант получается следующим путем:<br/>
1. По заданным законам распределения производится генерация вероятного сочетания переменных параметров.<br/>
2. Сгенерированные параметры подставляются в исходные данные и выполняется расчет, аналогичный приведенному в разделе 1.<br/>
3. Рассчитанное значение NPV запоминается, п.2-3 повторятся 1000 раз.<br/>
4. Рассчитывается количество значений NPV>0. Оно, в рамках ограничений расчетной модели и будет равно расчетной вероятности коммерчески-успешной реализации проекта.<br/>
5. Распределение параметра NPV следует использовать для оценки степени неопределенности проекта.


<br><br>
<div class="chartCont" style="position: relative; height:500px; width:800px">
<center><canvas id="myChart2" width="800" height="500"></canvas></center>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>

  const ctx2 = document.getElementById('myChart2').getContext('2d');
  const myChart2 = new Chart(ctx2, {
      type: 'bar',
      data: {
        labels : {{ N345 }},
          datasets: [{
            label: "NPV+",
            data : {{ N343 }},
            backgroundColor: '#CD6155',
            borderColor: '#17202A',
            borderWidth: 1
          },{
            label: "NPV-",
            data : {{ N344 }},
            backgroundColor: '#AF7AC5',
            borderColor: '#17202A',
            borderWidth: 1
          }]
      },
            options: {
                plugins: { title: { display: true, text: 'Статистика: NPV', color: 'black', font: {weight: 'bold', size: 18} } },
                scales: {
                    x: { title: { display: true, text: 'NPV, млн.руб.'} },
                    y: { title: { display: true, text: 'Частота, %'} }
                }
            }
  });
  </script>
</div>
 <center><h3>Вероятность коммерчески успешной реализации проекта {{ N1 }} </h3></center>    
</p>
<br>
<center><h3>Варьируемые параметры</h3></center>
<center><table id="mytable">
  <tr>
    <th>Параметр</th>
    <th>Размерность</th>
    <th>Распределение</th>
    <th>Медиана</th>
    <th>Квадр. откл.</th>
    <th>MIN</th>
    <th>MAX</th>
    <th>Смещение</th>
  </tr>
  <tr>
    <td>{{ N263 }}</td>
    <td>{{ N273 }}</td>
    <td>{{ N283 }}</td>
    <td>{{ N293 }}</td>
    <td>{{ N303 }}</td>
    <td>{{ N313 }}</td>
    <td>{{ N323 }}</td>
    <td>{{ N333 }}</td>
  </tr>
  <tr>
    <td>{{ N264 }}</td>
    <td>{{ N274 }}</td>
    <td>{{ N284 }}</td>
    <td>{{ N294 }}</td>
    <td>{{ N304 }}</td>
    <td>{{ N314 }}</td>
    <td>{{ N324 }}</td>
    <td>{{ N334 }}</td>
  </tr>
      <tr>
    <td>{{ N265 }}</td>
    <td>{{ N275 }}</td>
    <td>{{ N285 }}</td>
    <td>{{ N295 }}</td>
    <td>{{ N305 }}</td>
    <td>{{ N315 }}</td>
    <td>{{ N325 }}</td>
    <td>{{ N335 }}</td>
  </tr>
      <tr>
    <td>{{ N266 }}</td>
    <td>{{ N276 }}</td>
    <td>{{ N286 }}</td>
    <td>{{ N296 }}</td>
    <td>{{ N306 }}</td>
    <td>{{ N316 }}</td>
    <td>{{ N326 }}</td>
    <td>{{ N336 }}</td>
  </tr>
      <tr>
    <td>{{ N267 }}</td>
    <td>{{ N277 }}</td>
    <td>{{ N287 }}</td>
    <td>{{ N297 }}</td>
    <td>{{ N307 }}</td>
    <td>{{ N317 }}</td>
    <td>{{ N327 }}</td>
    <td>{{ N337 }}</td>
  </tr>
      <tr>
    <td>{{ N268 }}</td>
    <td>{{ N278 }}</td>
    <td>{{ N288 }}</td>
    <td>{{ N298 }}</td>
    <td>{{ N308 }}</td>
    <td>{{ N318 }}</td>
    <td>{{ N328 }}</td>
    <td>{{ N338 }}</td>
  </tr>
      <tr>
    <td>{{ N269 }}</td>
    <td>{{ N279 }}</td>
    <td>{{ N289 }}</td>
    <td>{{ N299 }}</td>
    <td>{{ N309 }}</td>
    <td>{{ N319 }}</td>
    <td>{{ N329 }}</td>
    <td>{{ N339 }}</td>
  </tr>
      <tr>
    <td>{{ N270 }}</td>
    <td>{{ N280 }}</td>
    <td>{{ N290 }}</td>
    <td>{{ N300 }}</td>
    <td>{{ N310 }}</td>
    <td>{{ N320 }}</td>
    <td>{{ N330 }}</td>
    <td>{{ N340 }}</td>
  </tr>
      <tr>
    <td>{{ N271 }}</td>
    <td>{{ N281 }}</td>
    <td>{{ N291 }}</td>
    <td>{{ N301 }}</td>
    <td>{{ N311 }}</td>
    <td>{{ N321 }}</td>
    <td>{{ N331 }}</td>
    <td>{{ N341 }}</td>
  </tr>
          <tr>
    <td>{{ N272 }}</td>
    <td>{{ N282 }}</td>
    <td>{{ N292 }}</td>
    <td>{{ N302 }}</td>
    <td>{{ N312 }}</td>
    <td>{{ N322 }}</td>
    <td>{{ N332 }}</td>
    <td>{{ N342 }}</td>
  </tr>
</table></center>

       <br><br>
   <center> <button onclick="updateDN()"> {--  Назад</button>
    <button onclick="updateUP()">Вперед --}</button></center>
    <script>
        var bin1 = {{ N360 }};
        var data1 = {{ N350 }};
        var labelZ = '{{ N263 }}';
        let numb1 =1;
        
           function updateUP() {
               numb1 = numb1 + 1;
               if (numb1 > 10) {
                   numb1 = 1
               };
               chose_id()
           }            
           function updateDN() {
               numb1 = numb1 - 1;
               if (numb1 < 1) {
                   numb1 = 10
               };
               chose_id()
           }
        
function chose_id() {
    if (numb1 === 1) {
        bin1 = {{ N360 }};
        data1 = {{ N350 }};
        labelZ = '{{ N263 }}'
    }
    if (numb1 === 2) {
        bin1 = {{ N361 }};
        data1 = {{ N351 }};
        labelZ = '{{ N264 }}'
    }
    if (numb1 === 3) {
        bin1 = {{ N362 }};
        data1 = {{ N352 }};
        labelZ = '{{ N265 }}'
    }
    if (numb1 === 4) {
        bin1 = {{ N363 }};
        data1 = {{ N353 }};
        labelZ = '{{ N266 }}'
    }
    if (numb1 === 5) {
        bin1 = {{ N364 }};
        data1 = {{ N354 }};
        labelZ = '{{ N267 }}'
    }
    if (numb1 === 6) {
        bin1 = {{ N365 }};
        data1 = {{ N355 }};
        labelZ = '{{ N268 }}'
    }
    if (numb1 === 7) {
        bin1 = {{ N366 }};
        data1 = {{ N356 }};
        labelZ = '{{ N269 }}'
    }
    if (numb1 === 8) {
        bin1 = {{ N367 }};
        data1 = {{ N357 }};
        labelZ = '{{ N270 }}'
    }
    if (numb1 === 9) {
        bin1 = {{ N368 }};
        data1 = {{ N358 }};
        labelZ = '{{ N271 }}'
    }
    if (numb1 === 10) {
        bin1 = {{ N369 }};
        data1 = {{ N359 }};
        labelZ = '{{ N272 }}'
    }    
    myChart3.data = {
        labels: bin1,
        datasets: [{
            label: "NPV+",
            data: data1,
            backgroundColor: '#CD6155',
            borderColor: '#17202A',
            borderWidth: 1
        }]
    };
                myChart3.options = {
                plugins: { title: { display: true, text: 'Распределение варьируемого параметра', color: 'black', font: {weight: 'bold', size: 18} } },
                scales: {
                    x: { title: { display: true, text: labelZ } },
                    y: { title: { display: true, text: 'Частота, %'} }
                }
            }
    myChart3.update()
}
     </script>    
   
<div class="chartCont" style="position: relative; height:500px; width:800px">
<center><canvas id="myChart3" width="800" height="500"></canvas></center>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>

  const ctx3 = document.getElementById('myChart3').getContext('2d');
  const myChart3 = new Chart(ctx3, {
      type: 'bar',
      data: {
        labels : bin1,
          datasets: [{
            label: "data",
            data : data1,
            backgroundColor: '#CD6155',
            borderColor: '#17202A',
            borderWidth: 1
          }

          ]
      },
            options: {
                plugins: { title: { display: true, text: 'Распределение варьируемого параметра', color: 'black', font: {weight: 'bold', size: 18} } },
                scales: {
                    x: { title: { display: true, text: labelZ } },
                    y: { title: { display: true, text: 'Частота, %'} }
                }
            }
  });
  </script>
</div>
    <br><br>
  <div class="chartCont" style="position: relative; height:500px; width:800px">
<center><canvas id="myChart4" width="800" height="500"></canvas></center>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>

  const ctx4 = document.getElementById('myChart4').getContext('2d');
  const myChart4 = new Chart(ctx4, {
      type: 'bar',
      //grouped: true,
      data: {
        labels : ['{{ N263 }}','{{ N264 }}','{{ N265 }}','{{ N266 }}','{{ N267 }}','{{ N268 }}','{{ N269 }}','{{ N270 }}','{{ N271 }}','{{ N272 }}'],
        //labels : bin1,
          datasets: [{
            label: "NPV (delta+10%)",
            data : {{ N347 }},
            backgroundColor: '#CD6155',
            borderColor: '#17202A',
            borderWidth: 1
          },{
            label: "NPV (delta-10%)",
            data : {{ N348 }},
            backgroundColor: '#2980B9',
            borderColor: '#17202A',
            borderWidth: 1
          }
          ]
      },
            options: {
                indexAxis: 'y',
                plugins: { title: { display: true, text: 'Диаграмма чувствительности к изменению параметров (+/-10%)', color: 'black', font: {weight: 'bold', size: 18} } },
                scales: {
                    x: { title: { display: true, text: 'дельта NPV, млн.руб.' } },
                    y: { title: { display: true, text: 'Параметр'} }
                }
            }
  });
  </script>
</div>  
    
{% endblock %}